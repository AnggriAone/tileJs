function Tile(element){var tile=element;var idleCss="perspective( 800px ) rotateX( 0deg ) rotateY( 0deg ) translateZ( 0px )";var initialize=function(){tile.style.webkitTransformOrigin="50% 50%";tile.style.MozTransformOrigin="50% 50%";tile.style.msTransformOrigin="50% 50%";tile.style.oTransformOrigin="50% 50%";tile.style.transformOrigin="50% 50%";tile.parentElement.style.webkitTransformStyle="preserve-3d";tile.parentElement.style.MozTransformStyle="preserve-3d";tile.parentElement.style.msTransformStyle="preserve-3d";tile.parentElement.style.oTransformStyle="preserve-3d";tile.parentElement.style.transformStyle="preserve-3d";tile.style.webkitTransition="-webkit-transform 0.08s";tile.style.MozTransition="-moz-transform 0.08s";tile.style.msTransition="-ms-transform 0.08s";tile.style.oTransition="-o-transform 0.08s";tile.style.transition="transform 0.08s";tile.style.webkitTransform=idleCss;tile.style.MozTransform=idleCss;tile.style.msTransform=idleCss;tile.style.oTransform=idleCss;tile.style.transform=idleCss;tile.style.outline="1px solid transparent";tile.addEventListener('mousedown',MouseDown,false);tile.addEventListener('mouseup',MouseUp,false);tile.addEventListener('mouseout',MouseUp,false);}var pushTile=function(x,y){var width=tile.offsetWidth;var height=tile.offsetHeight;var translateString="perspective( 800px ) ";if(x>width/4&&x<(width/4*3)&&y>height/4&&y<(height/4*3)){translateString+="rotateX( 0deg ) rotateY( 0deg ) translateZ( -30px )";}else if(Math.min(x,width-x)<Math.min(y,height-y)){if(x<width-x){translateString+="rotateX( 0deg ) rotateY( -20deg ) translateZ( 0px )";}else{translateString+="rotateX( 0deg ) rotateY( 20deg ) translateZ( 0px )";}}else{if(y<height-y){translateString+="rotateX( 20deg ) rotateY( 0deg ) translateZ( 0px )";}else{translateString+="rotateX( -20deg ) rotateY( 0deg ) translateZ( 0px )";}}tile.style.webkitTransform=translateString;tile.style.MozTransform=translateString;tile.style.msTransform=translateString;tile.style.oTransform=translateString;tile.style.transform=translateString;};var MouseDown=function(event){var x=event.offsetX||(event.layerX-tile.offsetLeft);var y=event.offsetY||(event.layerY-tile.offsetTop);pushTile(x,y);};var MouseUp=function(event){tile.style.webkitTransform=idleCss;tile.style.MozTransform=idleCss;tile.style.msTransform=idleCss;tile.style.oTransform=idleCss;tile.style.transform=idleCss;};initialize();}var tileElements=document.getElementsByClassName('metro-tile');var i;for(i=0;i<tileElements.length;i++){Tile(tileElements[i]);}